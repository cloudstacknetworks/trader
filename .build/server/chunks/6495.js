"use strict";exports.id=6495,exports.ids=[6495],exports.modules={96495:(e,s,t)=>{t.d(s,{JP:()=>F,zM:()=>S,yc:()=>f});var a=t(62901),r=t(24383),l=t(27878),i=t(72388),c=t(82657);let d=async e=>{try{let s=await fetch("/api/bugs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});return await s.json()}catch(e){return{success:!1,error:"Network error occurred"}}},n=async e=>{try{let s=await fetch(`/api/bugs/${e}`);return await s.json()}catch(e){return{success:!1,error:"Network error occurred"}}},o=async(e,s)=>{try{let t=await fetch(`/api/bugs/${e}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)});return await t.json()}catch(e){return{success:!1,error:"Network error occurred"}}},x=async e=>{try{let s=new URLSearchParams;e?.status&&s.append("status",e.status),e?.priority&&s.append("priority",e.priority);let t=await fetch(`/api/bugs?${s.toString()}`);return await t.json()}catch(e){return{success:!1,error:"Network error occurred"}}};var m=t(62097);let h=(e=!1)=>{let[s,t]=(0,r.useState)(e),a=(0,r.useCallback)(()=>{t(!0)},[]),l=(0,r.useCallback)(()=>{t(!1)},[]),i=(0,r.useCallback)(async e=>{a();try{return await e()}finally{l()}},[a,l]);return{isLoading:s,startLoading:a,stopLoading:l,withLoading:i}};var u=t(35825),p=t(21391),g=t(558),y=t(97718),j=t(68537),b=t(20884);let v=(0,t(71945).Z)("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);var N=t(68637);let f=({onBugClick:e,onNewBug:s,showFilters:t=!0})=>{let[d,n]=r.useState([]),[o,f]=r.useState("all"),[w,k]=r.useState("all"),{isLoading:C,startLoading:B,stopLoading:S}=h();r.useEffect(()=>{Z()},[o,w]);let Z=async()=>{B();try{let e={};"all"!==o&&(e.status=o),"all"!==w&&(e.priority=w);let s=await x(e);s?.success?n(s?.bugs||[]):(0,m.C)(s?.error||"Failed to load bugs","error")}catch(e){(0,m.C)("Failed to load bugs","error")}finally{S()}},L={low:"text-green-700 bg-green-100",medium:"text-yellow-700 bg-yellow-100",high:"text-orange-700 bg-orange-100",critical:"text-red-700 bg-red-100"},_={open:a.jsx(u.Z,{className:"h-4 w-4"}),in_progress:a.jsx(p.Z,{className:"h-4 w-4"}),resolved:a.jsx(g.Z,{className:"h-4 w-4"}),closed:a.jsx(g.Z,{className:"h-4 w-4"})};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:"Bug Reports"}),(0,a.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[d?.length," ",d?.length===1?"bug":"bugs"," found"]})]}),s&&(0,a.jsxs)(l.z,{onClick:s,children:[a.jsx(y.Z,{className:"h-4 w-4 mr-2"}),"Report New Bug"]})]}),t&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-3",children:[a.jsx(j.Z,{className:"h-4 w-4 text-gray-600"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Filters"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{children:"Status"}),(0,a.jsxs)(i.Ph,{value:o,onValueChange:f,children:[a.jsx(i.i4,{children:a.jsx(i.ki,{placeholder:"Select status"})}),a.jsx(i.Bw,{children:[{value:"all",label:"All Statuses"},{value:"open",label:"Open"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}].map(e=>a.jsx(i.Ql,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{children:"Priority"}),(0,a.jsxs)(i.Ph,{value:w,onValueChange:k,children:[a.jsx(i.i4,{children:a.jsx(i.ki,{placeholder:"Select priority"})}),a.jsx(i.Bw,{children:[{value:"all",label:"All Priorities"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"},{value:"critical",label:"Critical"}].map(e=>a.jsx(i.Ql,{value:e.value,children:e.label},e.value))})]})]})]})]}),C?a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}):d?.length===0?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[a.jsx(b.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No bugs found"}),("all"!==o||"all"!==w)&&a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Try adjusting your filters"})]}):a.jsx("div",{className:"space-y-3",children:d?.map(s=>a.jsx("div",{onClick:()=>e?.(s?.id),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-5 hover:shadow-md hover:border-gray-300 transition-all cursor-pointer group",children:a.jsxs("div",{className:"flex items-start justify-between gap-4",children:[a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("h3",{className:"text-base font-semibold text-gray-900 group-hover:text-blue-600 transition-colors mb-2",children:s?.title}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2 mb-3",children:s?.description}),a.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[a.jsxs("span",{className:N.cn("inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium",L[s?.priority]||"text-gray-700 bg-gray-100"),children:[a.jsx(v,{className:"h-3 w-3"}),s?.priority]}),a.jsxs("span",{className:"inline-flex items-center gap-1.5 text-xs text-gray-600",children:[_[s?.status],s?.status?.replace("_"," ")]}),a.jsx("span",{className:"text-xs text-gray-500",children:new Date(s?.createdAt).toLocaleDateString()}),s?._count?.activities&&s._count.activities>0&&a.jsxs("span",{className:"text-xs text-gray-500",children:[s._count.activities," ",1===s._count.activities?"activity":"activities"]})]})]}),a.jsx("div",{className:"flex-shrink-0",children:a.jsxs("div",{className:"text-xs text-gray-500",children:[a.jsx("p",{className:"mb-1",children:"Reported by"}),a.jsx("p",{className:"font-medium text-gray-900",children:s?.reportedBy})]})})]})},s?.id))})]})};f.displayName="BugList";var w=t(250),k=t(52);let C=(e,s)=>{let[t,a]=(0,r.useState)(e),[l,i]=(0,r.useState)({}),[c,d]=(0,r.useState)({}),n=(0,r.useCallback)((e,t)=>{let a=s?.[e];return a?a?.required&&(!t||"string"==typeof t&&t?.trim()==="")?a?.message||`${e} is required`:a?.minLength&&"string"==typeof t&&t?.length<a?.minLength?a?.message||`${e} must be at least ${a?.minLength} characters`:a?.maxLength&&"string"==typeof t&&t?.length>a?.maxLength?a?.message||`${e} must be at most ${a?.maxLength} characters`:a?.pattern&&"string"==typeof t&&!a?.pattern?.test(t)||a?.custom&&!a?.custom(t)?a?.message||`${e} is invalid`:"":""},[s]),o=(0,r.useCallback)((e,s)=>{if(a(t=>({...t,[e]:s})),c?.[e]){let t=n(e,s);i(s=>({...s,[e]:t}))}},[c,n]),x=(0,r.useCallback)(e=>{d(s=>({...s,[e]:!0}));let s=n(e,t?.[e]);i(t=>({...t,[e]:s}))},[t,n]),m=(0,r.useCallback)(()=>{let e={},a=!0;return Object.keys(s)?.forEach(s=>{let r=n(s,t?.[s]);r&&(e[s]=r,a=!1)}),i(e),d(Object.keys(s)?.reduce((e,s)=>({...e,[s]:!0}),{})),a},[s,t,n]);return{values:t,errors:l,touched:c,handleChange:o,handleBlur:x,validate:m,reset:(0,r.useCallback)(()=>{a(e),i({}),d({})},[e])}},B={title:{required:!0,minLength:5,message:"Title must be at least 5 characters"},description:{required:!0,minLength:10,message:"Description must be at least 10 characters"},priority:{required:!0},reportedBy:{required:!0,minLength:2,message:"Reporter name must be at least 2 characters"}},S=({onSuccess:e,onCancel:s})=>{let[t,n]=r.useState(!1),{values:o,errors:x,handleChange:h,handleBlur:p,validate:g}=C({title:"",description:"",priority:"medium",reportedBy:""},B),y=async s=>{if(s.preventDefault(),!g()){(0,m.C)("Please fix the errors in the form","error");return}n(!0);try{let s=await d({title:o?.title,description:o?.description,priority:o?.priority,reportedBy:o?.reportedBy});s?.success?((0,m.C)("Bug submitted successfully!","success"),e?.(s?.bugId||"")):(0,m.C)(s?.error||"Failed to submit bug","error")}catch(e){(0,m.C)("An unexpected error occurred","error")}finally{n(!1)}};return(0,a.jsxs)("form",{onSubmit:y,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex items-start gap-3",children:[a.jsx(u.Z,{className:"h-5 w-5 text-blue-600 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{className:"text-sm text-blue-800",children:[a.jsx("p",{className:"font-medium",children:"Bug Submission Form"}),a.jsx("p",{className:"mt-1 text-blue-700",children:"Please provide detailed information to help us resolve the issue quickly."})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"bug-title",children:"Bug Title"}),a.jsx(w.I,{id:"bug-title",placeholder:"Brief description of the bug",value:o?.title,onChange:e=>h("title",e.target.value),onBlur:()=>p("title")}),x?.title&&a.jsx("p",{className:"text-sm text-red-600",children:x?.title})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"bug-description",children:"Description"}),a.jsx(k.g,{id:"bug-description",placeholder:"Detailed description of the bug, steps to reproduce, expected vs actual behavior...",value:o?.description,onChange:e=>h("description",e.target.value),onBlur:()=>p("description"),rows:6}),x?.description&&a.jsx("p",{className:"text-sm text-red-600",children:x?.description})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"bug-priority",children:"Priority"}),(0,a.jsxs)(i.Ph,{value:o?.priority,onValueChange:e=>h("priority",e),children:[a.jsx(i.i4,{id:"bug-priority",children:a.jsx(i.ki,{placeholder:"Select priority"})}),(0,a.jsxs)(i.Bw,{children:[a.jsx(i.Ql,{value:"low",children:"Low"}),a.jsx(i.Ql,{value:"medium",children:"Medium"}),a.jsx(i.Ql,{value:"high",children:"High"}),a.jsx(i.Ql,{value:"critical",children:"Critical"})]})]}),x?.priority&&a.jsx("p",{className:"text-sm text-red-600",children:x?.priority})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[a.jsx(c._,{htmlFor:"bug-reporter",children:"Reported By"}),a.jsx(w.I,{id:"bug-reporter",placeholder:"Your name or email",value:o?.reportedBy,onChange:e=>h("reportedBy",e.target.value),onBlur:()=>p("reportedBy")}),x?.reportedBy&&a.jsx("p",{className:"text-sm text-red-600",children:x?.reportedBy})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 pt-4",children:[(0,a.jsxs)(l.z,{type:"submit",disabled:t,children:[a.jsx(b.Z,{className:"h-4 w-4 mr-2"}),t?"Submitting...":"Submit Bug"]}),s&&a.jsx(l.z,{type:"button",variant:"outline",onClick:s,children:"Cancel"})]})]})};S.displayName="BugForm";let Z=({tabs:e,defaultTab:s,onChange:t,className:l})=>{let[i,c]=r.useState(s||e?.[0]?.id||""),d=e=>{c(e),t?.(e)},n=e?.find(e=>e?.id===i)?.content;return(0,a.jsxs)("div",{className:(0,N.cn)("w-full",l),children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"-mb-px flex space-x-8",children:e?.map(e=>a.jsxs("button",{onClick:()=>d(e?.id),className:N.cn("flex items-center gap-2 py-4 px-1 border-b-2 font-medium text-sm transition-colors",i===e?.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[e?.icon,e?.label]},e?.id))})}),a.jsx("div",{className:"mt-6",children:n})]})};Z.displayName="TabLayout";var L=t(77185),_=t(68832);let F=({bugId:e})=>{let[s,t]=r.useState(null),{isLoading:l,startLoading:d,stopLoading:x}=h();r.useEffect(()=>{y()},[e]);let y=async()=>{d();try{let s=await n(e);s?.success?t(s?.bug||null):(0,m.C)(s?.error||"Failed to load bug details","error")}catch(e){(0,m.C)("Failed to load bug details","error")}finally{x()}},j=async s=>{try{let t=await o(e,{status:s});t?.success?((0,m.C)("Status updated successfully","success"),y()):(0,m.C)(t?.error||"Failed to update status","error")}catch(e){(0,m.C)("Failed to update status","error")}},f={open:a.jsx(u.Z,{className:"h-4 w-4"}),in_progress:a.jsx(p.Z,{className:"h-4 w-4"}),resolved:a.jsx(g.Z,{className:"h-4 w-4"}),closed:a.jsx(g.Z,{className:"h-4 w-4"})};if(l)return a.jsx("div",{className:"flex items-center justify-center py-12",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})});if(!s)return(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(b.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Bug not found"})]});let w=(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:s?.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-wrap",children:[(0,a.jsxs)("span",{className:(0,N.cn)("inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-sm font-medium",{low:"text-green-700 bg-green-100",medium:"text-yellow-700 bg-yellow-100",high:"text-orange-700 bg-orange-100",critical:"text-red-700 bg-red-100"}[s?.priority]||"text-gray-700 bg-gray-100"),children:[a.jsx(v,{className:"h-3.5 w-3.5"}),s?.priority]}),(0,a.jsxs)("span",{className:"inline-flex items-center gap-1.5 text-sm text-gray-600",children:[f[s?.status],s?.status?.replace("_"," ")]})]})]}),(0,a.jsxs)("div",{className:"w-48 space-y-2",children:[a.jsx(c._,{children:"Status"}),(0,a.jsxs)(i.Ph,{value:s?.status,onValueChange:j,children:[a.jsx(i.i4,{children:a.jsx(i.ki,{})}),a.jsx(i.Bw,{children:[{value:"open",label:"Open"},{value:"in_progress",label:"In Progress"},{value:"resolved",label:"Resolved"},{value:"closed",label:"Closed"}].map(e=>a.jsx(i.Ql,{value:e.value,children:e.label},e.value))})]})]})]}),(0,a.jsxs)("div",{className:"border-t border-gray-200 pt-6",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 mb-3",children:"Description"}),a.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:s?.description})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(L.Z,{className:"h-4 w-4"}),"Reporter Information"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Reported By"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:s?.reportedBy})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Created At"}),a.jsx("p",{className:"text-sm text-gray-700",children:new Date(s?.createdAt).toLocaleString()})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium text-gray-900 mb-4 flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-4 w-4"}),"Status Information"]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Last Updated"}),a.jsx("p",{className:"text-sm text-gray-700",children:new Date(s?.updatedAt).toLocaleString()})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Assigned To"}),a.jsx("p",{className:"text-sm font-medium text-gray-900",children:s?.assignedTo||"Unassigned"})]})]})]})]})]}),k=a.jsx("div",{className:"space-y-4",children:s?.activities?.length===0?(0,a.jsxs)("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[a.jsx(_.Z,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"No activity yet"})]}):a.jsx("div",{className:"space-y-3",children:s?.activities?.map(e=>a.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:a.jsx(_.Z,{className:"h-4 w-4 text-blue-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsxs("p",{className:"text-sm text-gray-900",children:[a.jsx("span",{className:"font-medium",children:e?.userName})," ",a.jsx("span",{className:"text-gray-600",children:e?.action?.replace("_"," ")}),e?.field&&a.jsxs("span",{className:"text-gray-600",children:[" ",e?.field,":",a.jsx("span",{className:"text-red-600 line-through mx-1",children:e?.oldValue}),a.jsx("span",{className:"text-green-600",children:e?.newValue})]})]}),e?.comment&&a.jsx("p",{className:"mt-2 text-sm text-gray-700 bg-gray-50 rounded p-2",children:e?.comment}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:new Date(e?.createdAt).toLocaleString()})]})]})},e?.id))})}),C=[{id:"details",label:"Details",icon:a.jsx(b.Z,{className:"h-4 w-4"}),content:w},{id:"activity",label:"Activity",icon:a.jsx(_.Z,{className:"h-4 w-4"}),content:k}];return a.jsx(Z,{tabs:C,defaultTab:"details"})};F.displayName="BugDetails"},68832:(e,s,t)=>{t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]])},20884:(e,s,t)=>{t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Bug",[["path",{d:"m8 2 1.88 1.88",key:"fmnt4t"}],["path",{d:"M14.12 3.88 16 2",key:"qol33r"}],["path",{d:"M9 7.13v-1a3.003 3.003 0 1 1 6 0v1",key:"d7y7pr"}],["path",{d:"M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6",key:"xs1cw7"}],["path",{d:"M12 20v-9",key:"1qisl0"}],["path",{d:"M6.53 9C4.6 8.8 3 7.1 3 5",key:"32zzws"}],["path",{d:"M6 13H2",key:"82j7cp"}],["path",{d:"M3 21c0-2.1 1.7-3.9 3.8-4",key:"4p0ekp"}],["path",{d:"M20.97 5c0 2.1-1.6 3.8-3.5 4",key:"18gb23"}],["path",{d:"M22 13h-4",key:"1jl80f"}],["path",{d:"M17.2 17c2.1.1 3.8 1.9 3.8 4",key:"k3fwyw"}]])},21391:(e,s,t)=>{t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},68537:(e,s,t)=>{t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},77185:(e,s,t)=>{t.d(s,{Z:()=>a});let a=(0,t(71945).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])}};