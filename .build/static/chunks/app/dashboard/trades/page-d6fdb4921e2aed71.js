(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2056],{57957:function(e,s,t){Promise.resolve().then(t.bind(t,40696)),Promise.resolve().then(t.bind(t,23932))},23932:function(e,s,t){"use strict";t.d(s,{TradesView:function(){return j}});var l=t(15444),a=t(89300),r=t(99827),i=t(61335),n=t(2422),d=t(74678),c=t(34635),o=t(70489),x=t(81471),m=t(81410),u=t(64670),h=t(48967),f=t(62492),p=t(25076);function j(){let[e,s]=(0,a.useState)([]),[t,j]=(0,a.useState)(!0),[g,N]=(0,a.useState)(""),[b,y]=(0,a.useState)("all"),[v,w]=(0,a.useState)(!1),k=async()=>{try{let e=await fetch("/api/trades?limit=100"),t=await e.json();s(t?.trades||[])}catch(e){console.error("Error fetching trades:",e)}finally{j(!1),w(!1)}};(0,a.useEffect)(()=>{k()},[]);let T=e.filter(e=>{let s=e.ticker.toLowerCase().includes(g.toLowerCase()),t="all"===b||"winning"===b&&Number(e.realizedPnl||0)>0||"losing"===b&&0>Number(e.realizedPnl||0)||"open"===b&&!e.exitTime;return s&&t});if(t)return(0,l.jsx)("div",{className:"space-y-6",children:(0,l.jsxs)("div",{className:"animate-pulse",children:[(0,l.jsx)("div",{className:"h-8 bg-gray-200 rounded w-48 mb-4"}),(0,l.jsx)("div",{className:"h-4 bg-gray-200 rounded w-96 mb-6"}),(0,l.jsx)("div",{className:"grid gap-4",children:[1,2,3,4].map(e=>(0,l.jsx)("div",{className:"h-24 bg-gray-200 rounded"},e))})]})});let Z=e.filter(e=>e.exitTime),$=Z.reduce((e,s)=>e+Number(s.realizedPnl||0),0),_=Z.filter(e=>Number(e.realizedPnl||0)>0),C=Z.length>0?_.length/Z.length*100:0,M=Z.length>0?Z.reduce((e,s)=>e+(s.holdTimeMinutes||0),0)/Z.length:0;return(0,l.jsxs)("div",{className:"space-y-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-start",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Trade History"}),(0,l.jsx)("p",{className:"text-gray-600",children:"Complete record of all executed trades and their performance"})]}),(0,l.jsxs)(n.z,{onClick:()=>{w(!0),k()},disabled:v,variant:"outline",className:"flex items-center space-x-2",children:[(0,l.jsx)(x.Z,{className:`h-4 w-4 ${v?"animate-spin":""}`}),(0,l.jsx)("span",{children:"Refresh"})]})]}),(0,l.jsxs)("div",{className:"grid gap-4 md:grid-cols-4",children:[(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Trades"}),(0,l.jsx)(m.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(r.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:e.length}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[Z.length," completed"]})]})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ll,{className:"text-sm font-medium",children:"Total P&L"}),$>=0?(0,l.jsx)(u.Z,{className:"h-4 w-4 text-green-600"}):(0,l.jsx)(h.Z,{className:"h-4 w-4 text-red-600"})]}),(0,l.jsxs)(r.aY,{children:[(0,l.jsxs)("div",{className:`text-2xl font-bold ${$>=0?"text-green-600":"text-red-600"}`,children:[$>=0?"+":"","$",$.toFixed(2)]}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Realized gains/losses"})]})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ll,{className:"text-sm font-medium",children:"Win Rate"}),(0,l.jsx)(u.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(r.aY,{children:[(0,l.jsxs)("div",{className:"text-2xl font-bold",children:[C.toFixed(1),"%"]}),(0,l.jsxs)("p",{className:"text-xs text-muted-foreground",children:[_.length,"/",Z.length," winning"]})]})]}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,l.jsx)(r.ll,{className:"text-sm font-medium",children:"Avg Hold Time"}),(0,l.jsx)(f.Z,{className:"h-4 w-4 text-muted-foreground"})]}),(0,l.jsxs)(r.aY,{children:[(0,l.jsx)("div",{className:"text-2xl font-bold",children:M<60?`${Math.round(M)}m`:`${Math.round(M/60)}h`}),(0,l.jsx)("p",{className:"text-xs text-muted-foreground",children:"Time in position"})]})]})]}),(0,l.jsx)(r.Zb,{children:(0,l.jsx)(r.aY,{className:"pt-6",children:(0,l.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4",children:[(0,l.jsxs)("div",{className:"flex-1",children:[(0,l.jsx)(c._,{htmlFor:"search",children:"Search Trades"}),(0,l.jsxs)("div",{className:"relative mt-1",children:[(0,l.jsx)(p.Z,{className:"absolute left-3 top-3 h-4 w-4 text-gray-400"}),(0,l.jsx)(d.I,{id:"search",placeholder:"Search by ticker symbol...",value:g,onChange:e=>N(e.target.value),className:"pl-10"})]})]}),(0,l.jsxs)("div",{className:"w-full sm:w-48",children:[(0,l.jsx)(c._,{htmlFor:"filter",children:"Filter by Result"}),(0,l.jsxs)(o.Ph,{value:b,onValueChange:y,children:[(0,l.jsx)(o.i4,{className:"mt-1",children:(0,l.jsx)(o.ki,{placeholder:"All Trades"})}),(0,l.jsxs)(o.Bw,{children:[(0,l.jsx)(o.Ql,{value:"all",children:"All Trades"}),(0,l.jsx)(o.Ql,{value:"winning",children:"Winning Only"}),(0,l.jsx)(o.Ql,{value:"losing",children:"Losing Only"}),(0,l.jsx)(o.Ql,{value:"open",children:"Open Positions"})]})]})]})]})})}),(0,l.jsxs)(r.Zb,{children:[(0,l.jsxs)(r.Ol,{children:[(0,l.jsx)(r.ll,{children:"Trading History"}),(0,l.jsx)(r.SZ,{children:"Detailed record of all trades with entry/exit information"})]}),(0,l.jsx)(r.aY,{children:T.length>0?(0,l.jsx)("div",{className:"space-y-3",children:T.map(e=>{let s=Number(e.realizedPnl||0),t=Number(e.entryPrice),a=Number(e.exitPrice||0),r=s>=0,n=!e.exitTime,d=t>0&&a>0?(a-t)/t*100:0;return(0,l.jsxs)("div",{className:`flex items-center justify-between p-4 border rounded-lg ${n?"border-blue-200 bg-blue-50":r?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[(0,l.jsx)("div",{className:"flex-1",children:(0,l.jsx)("div",{className:"flex items-center space-x-4",children:(0,l.jsxs)("div",{children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)("span",{className:"text-lg font-bold text-gray-900",children:e.ticker}),(0,l.jsx)(i.C,{variant:"outline",className:`${n?"border-blue-500 text-blue-700":r?"border-green-500 text-green-700":"border-red-500 text-red-700"}`,children:n?"Open":r?"Win":"Loss"}),e.strategy&&(0,l.jsx)(i.C,{variant:"secondary",className:"text-xs",children:e.strategy})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-2 text-sm",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-500",children:"Quantity"}),(0,l.jsxs)("p",{className:"font-medium",children:[e.quantity," shares"]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-500",children:"Entry"}),(0,l.jsxs)("p",{className:"font-medium",children:["$",t.toFixed(2)]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-500",children:"Exit"}),(0,l.jsx)("p",{className:"font-medium",children:a>0?`$${a.toFixed(2)}`:"-"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("p",{className:"text-gray-500",children:"Duration"}),(0,l.jsx)("p",{className:"font-medium",children:e.holdTimeMinutes?e.holdTimeMinutes<60?`${e.holdTimeMinutes}m`:`${Math.floor(e.holdTimeMinutes/60)}h ${e.holdTimeMinutes%60}m`:n?"Open":"-"})]})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-600",children:[(0,l.jsxs)("span",{children:["Entry: ",new Date(e.entryTime).toLocaleString()]}),e.exitTime&&(0,l.jsxs)("span",{children:["Exit: ",new Date(e.exitTime).toLocaleString()]}),e.exitReason&&(0,l.jsx)(i.C,{variant:"outline",className:"text-xs",children:e.exitReason.replace("_"," ")})]})]})})}),(0,l.jsxs)("div",{className:"text-right",children:[!n&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:`text-xl font-bold ${r?"text-green-600":"text-red-600"}`,children:[s>=0?"+":"","$",s.toFixed(2)]}),(0,l.jsxs)("div",{className:`text-sm ${r?"text-green-600":"text-red-600"}`,children:[d>=0?"+":"",d.toFixed(2),"%"]})]}),n&&(0,l.jsx)("div",{className:"text-blue-600 font-medium",children:"Position Open"})]})]},e.id)})}):(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,l.jsx)(m.Z,{className:"h-12 w-12 text-gray-400 mb-4"}),(0,l.jsx)("p",{className:"text-lg text-gray-600 mb-2",children:"No trades found"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:g||"all"!==b?"No trades match your current filters":"Trades will appear here after execution"})]})})]})]})}},74678:function(e,s,t){"use strict";t.d(s,{I:function(){return i}});var l=t(15444),a=t(89300),r=t(65522);let i=a.forwardRef(({className:e,type:s,...t},a)=>(0,l.jsx)("input",{type:s,className:(0,r.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...t}));i.displayName="Input"},34635:function(e,s,t){"use strict";t.d(s,{_:function(){return c}});var l=t(15444),a=t(89300),r=t(4100),i=t(2371),n=t(65522);let d=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=a.forwardRef(({className:e,...s},t)=>(0,l.jsx)(r.f,{ref:t,className:(0,n.cn)(d(),e),...s}));c.displayName=r.f.displayName},70489:function(e,s,t){"use strict";t.d(s,{Bw:function(){return m},Ph:function(){return c},Ql:function(){return u},i4:function(){return x},ki:function(){return o}});var l=t(15444),a=t(89300),r=t(26696),i=t(63751),n=t(77248),d=t(65522);let c=r.fC;r.ZA;let o=r.B4,x=a.forwardRef(({className:e,children:s,...t},a)=>(0,l.jsxs)(r.xz,{ref:a,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,(0,l.jsx)(r.JO,{asChild:!0,children:(0,l.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]}));x.displayName=r.xz.displayName;let m=a.forwardRef(({className:e,children:s,position:t="popper",...a},i)=>(0,l.jsx)(r.h_,{children:(0,l.jsx)(r.VY,{ref:i,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...a,children:(0,l.jsx)(r.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})}));m.displayName=r.VY.displayName,a.forwardRef(({className:e,...s},t)=>(0,l.jsx)(r.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=r.__.displayName;let u=a.forwardRef(({className:e,children:s,...t},a)=>(0,l.jsxs)(r.ck,{ref:a,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(r.wU,{children:(0,l.jsx)(n.Z,{className:"h-4 w-4"})})}),(0,l.jsx)(r.eT,{children:s})]}));u.displayName=r.ck.displayName,a.forwardRef(({className:e,...s},t)=>(0,l.jsx)(r.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=r.Z0.displayName},62492:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(42154).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},81471:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(42154).Z)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},48967:function(e,s,t){"use strict";t.d(s,{Z:function(){return l}});let l=(0,t(42154).Z)("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]])},4100:function(e,s,t){"use strict";t.d(s,{f:function(){return n}});var l=t(89300),a=t(57234),r=t(15444),i=l.forwardRef((e,s)=>(0,r.jsx)(a.WV.label,{...e,ref:s,onMouseDown:s=>{s.target.closest("button, input, select, textarea")||(e.onMouseDown?.(s),!s.defaultPrevented&&s.detail>1&&s.preventDefault())}}));i.displayName="Label";var n=i}},function(e){e.O(0,[2616,572,5007,5762,1401,8371,6696,4405,2386,7156,1744],function(){return e(e.s=57957)}),_N_E=e.O()}]);